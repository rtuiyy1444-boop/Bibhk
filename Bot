from flask import Flask, request
import requests
import os

app = Flask(__name__)

TELEGRAM_TOKEN = os.environ.get("TELEGRAM_TOKEN")
BASE_URL = f"https://api.telegram.org/bot{TELEGRAM_TOKEN}"

# Ù‚Ø§Ø¦Ù…Ø© Ù…ÙˆØ¯Ø§Øª Minecraft
mods = [
    {"name": "ğŸª¨ OptiFine", "url": "https://example.com/optifine.jar"},
    {"name": "ğŸŒ¾ JEI", "url": "https://example.com/jei.jar"},
    {"name": "ğŸŒ³ Biomes O' Plenty", "url": "https://example.com/biomesoplenty.jar"},
    {"name": "ğŸ—ºï¸ JourneyMap", "url": "https://example.com/journeymap.jar"}
]

def send_message(chat_id, text, reply_markup=None):
    data = {"chat_id": chat_id, "text": text, "parse_mode": "Markdown"}
    if reply_markup:
        data["reply_markup"] = reply_markup
    requests.post(f"{BASE_URL}/sendMessage", json=data)

@app.route(f"/{TELEGRAM_TOKEN}", methods=["POST"])
def webhook():
    update = request.get_json()
    
    if "message" in update:
        chat_id = update["message"]["chat"]["id"]
        text = update["message"].get("text", "")

        if text in ["/start", "/stars"]:
            # Ø¥Ù†Ø´Ø§Ø¡ ÙˆØ§Ø¬Ù‡Ø© Ø¹Ø±Ø¶ Ø§Ù„Ù…ÙˆØ¯Ø§Øª
            keyboard = {
                "inline_keyboard": [
                    [{"text": mod["name"], "url": mod["url"]}] for mod in mods
                ]
            }
            message_text = "ğŸ® *Ù‚Ø§Ø¦Ù…Ø© Ù…ÙˆØ¯Ø§Øª Minecraft 1.21.113*\n\nØ§Ø®ØªØ± Ø§Ù„Ù…ÙˆØ¯ Ù„Ù„ØªØ­Ù…ÙŠÙ„:"
            send_message(chat_id, message_text, reply_markup=keyboard)

    return "OK"

@app.route("/")
def index():
    return "Bot is running!"

if __name__ == "__main__":
    app.run(host="0.0.0.0", port=int(os.environ.get("PORT", 5000)))
